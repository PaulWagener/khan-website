<div class="end-of-stack-info">
    <div class="title clearfix">
        <div class="stack-stats">
            <p data-desc="Your longest streak in this stack of cards.">
            	<img src="/images/power-mode/streak.png" /><span class="times">&times;</span>{{longestStreak}}
           	</p>
            <p data-desc="Your total speedy answers for this stack of cards.">
            	<img src="/images/power-mode/speed-answer.png" /><span class="times">&times;</span>{{speedyCards}}
            </p>
            <p data-desc="Your total leaves for this stack of cards.">
            	<img src="/images/power-mode/card-leaf-full-large.png" /><span class="times">&times;</span>{{totalLeaves}}
            </p>
        </div>
        <h2>Stack Progress</h2>
    </div>
    <div class="progress-graph current-stack">
	    {{#each progress}}
	    	<div class="skill-status">
		    	<h2 class="skill-bar-title">{{displayName}} {{#if userExercise.exerciseStates.proficient}}<img src="/images/objective-complete-tick.png" class="proficient-tick" data-desc="You've earned proficiency in this skill"/>{{/if}}</h2>
		    	<div class="skill-bar">
		    		<div class="fill green" style="width:{{multiply end 100}}%;"></div>
		    		{{#if userExercise.exerciseStates.proficient}}
		    		<div class="fill blue" style="width:{{multiply end 100}}%;"></div>
		    		{{else}}
		    		<div class="fill gray" style="width:{{multiply start 100}}%;"></div>
		    		{{/if}}
		        </div>
		    </div>
	    {{/each}}
    </div>

    {{#unless practiceMode}}
    <div>
        <h2 style="display: inline-block;">Overall Progress</h2>
        <!-- TODO: If this interaction sticks around it should be pulled back into backbone -->
        <a href="javascript:void(0);" onclick="$('.current-topic').slideDown(); $(this).hide(); return false;" class="simple-button action-gradient" id="show-topic-details">
            {{proficient}}/{{total}} Skills
        </a>
        
    </div>
    <div class="progress-graph current-topic clearfix">
        <div class="three-col col-one">
            <h3>Upcoming Skills</h3>
            {{#each unstartedExercises}}
            <div class="skill-status">
                <h4 class="skill-bar-title">
                    {{exerciseModel.displayName}}
                </h4>
                <div class="skill-bar">
                    <div class="fill green" style="width:{{multiply progress 100}}%;"></div>
                </div> 
            </div>
            {{/each}}
        </div>
        <div class="three-col col-two">
            <h3>Skills In-Progress</h3>
            {{#each startedExercises}}
            <div class="skill-status">
                <h4 class="skill-bar-title">
                    {{exerciseModel.displayName}}
                </h4>
                <div class="skill-bar">
                    <div class="fill green" style="width:{{multiply progress 100}}%;"></div>
                </div> 
            </div>
            {{/each}}
        </div>
        <div class="three-col col-three">
            <h3>Proficient Skills</h3>
            {{#each proficientExercises}}
        	<div class="skill-status">
    	    	<h4 class="skill-bar-title">
    	    		{{exerciseModel.displayName}} <img src="/images/objective-complete-tick.png" width="12" height="12" class="proficient-tick" data-desc="You've earned proficiency in this skill"/>
    	    	</h4>
    	    	<div class="skill-bar">
                    <div class="fill green" style="width:{{multiply progress 100}}%;"></div>
    	    		<div class="fill blue" style="width:{{multiply progress 100}}%;"></div>
    	        </div> 
            </div>
            {{/each}}
        </div>
    </div>
    {{/unless}}

    <div class="stack-controls">
      <a href="/exercisedashboard" class="simple-button action-gradient left">Take a Break</a><a href="?" class="simple-button action-gradient green right">More Stacks!</a>
    </div>
</div>
