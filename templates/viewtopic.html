{% extends "page_template.html" %}

{% block meta_page_title %}
{{ main_topic.standalone_title|escape }} | {% endblock %}
{% block meta_keywords %}
  {% for tag in main_topic.tags %}{{ tag }},{% endfor %}
{% endblock %}
{% block meta_description %}{{ main_topic.description }}{% endblock %}

{% block pagecss %}
<style>
	#page_sub_nav { display: none; }
	td { vertical-align: top; }
	.ui-tooltip, .qtip { max-width: 200px; }
    #library-content .library-content-header h2.root-topic { font-size: 22pt; font-weight: bold; margin-bottom: 18px; }
    #library-content .library-content-list p.topic-desc { display: block; width: 500px; }
    #library-content .topic-spacer { display: block; margin-bottom: 30px; }
</style>
{% endblock pagecss %}

{% block pagecontent %}

<!-- Extends pane background down to footer -->
<div class="nav-fixed-background">
  <div class="nav-pane-background"></div>
</div>

<article id="topic-page">

<!--
<div class="topic-page-header">
  <div id="thumbnails_container">
    <table>
        <tr>
            <td>
                <div id="thumbnails" class="visited-no-recolor">
                  <table>
                    {% for thumbnail_link_row in thumbnail_link_set %}
                    <tr>
                    {% for thumbnail_link in thumbnail_link_row %}
                      <td class="thumbnail_td {{ thumbnail_link["type"] }} {% if thumbnail_link["selected"] %}selected{% endif %}" data-key="{{ thumbnail_link["key"]|escape }}" data-youtube-id="{{ thumbnail_link["youtube_id"]|escape }}">

                        <a href="{{ thumbnail_link["href"]|escape }}" data-tag="Homepage Featured" class="thumbnail_link"><div 
                                class="thumb" style="background-image:url('{{ thumbnail_link["thumb_urls"]["hq"]|escape }}')"
                                ></div></a>

                        <a href="{{ thumbnail_link["href"]|escape }}" data-tag="Homepage Featured" class="thumbnail_link"><div class="thumbnail_label"><div class="thumbnail_desc">{{ thumbnail_link["desc_html"] }}</div><div class="thumbnail_teaser">{{ thumbnail_link["teaser_html"] }}</div></div></a>
                      </td>
                      {% endfor %}
                    </tr>
                    {% endfor %}
                  </table>
                </div>
            </td>
        </tr>
    </table>
  </div>

  <div data-role="header" class="main-header">
    <h2 class='topic-heading'>{{ main_topic.standalone_title }}</h2>
    <p class='topic-desc'>{{ main_topic.description }}</p>
  </div>
</div>
-->

<div class="topic-page-content">
  <div class="container">
    {% if topic_children %}
    <div class="nav-pane-background"></div>
    <div class="nav-pane">

      <ul>
        <li data-id="">
          <a href="/{{ main_topic.get_extended_slug() }}" data-id="">
            <h2 class='topic-heading'>{{ main_topic.title }}</h2>
            <div class="right-arrow"></div>
          </a>
        </li>
        <li class="subheading"><span>Videos</span></li>
      {% for child in topic_children %}
        <li data-id="{{ child.id }}">
          <a href="/{{ main_topic.get_extended_slug() }}/{{ child.id }}" data-id="{{ child.id }}">
            {{ child.title|escape }}
            <div class="right-arrow"></div>
          </a>
        </li>
      {% endfor %}
      </ul>
      <div style="clear: both"></div>
    </div>
    {% endif %}
    <div class="content-pane {% if topic_children %}indent{% endif %}">
      <div class="content-inner">
      </div>
    </div>
  </div>
</div>

</article>
{% endblock %}

{% block bottompagescript %}
    {{ js_css_packages.js_package("topic") }}
    {{ js_css_packages.css_package("topic") }}
    {{ js_css_packages.js_package("video") }}
    {{ js_css_packages.css_package("video") }}
    <script type="text/javascript">
      $(function() {
        var videoLists = {{ video_lists }};
        var rootPath = "/{{ main_topic.get_extended_slug() }}";
        var rootTopic = {{ templatetags.jsonify(main_topic_info, True) }};
        TopicPage.init(videoLists, rootPath, rootTopic);
      });
    </script>
{% endblock %}
